<div class="app">
    @if(store.course()) {
    <div class="title">consumptions&nbsp;{{store.course().id}}</div>
    }
    @if(store.consumptions() && store.consumptions().length){

    <mat-accordion class="consumptions-accordion"
        multi="false">
        @for(consumption of store.consumptions();track consumption;
        let first = $first, last = $last, index = $index;){

        <mat-expansion-panel>
            <mat-expansion-panel-header [ngClass]="{'selected': index === indexSelected}">
                <mat-panel-title>
                    <button [disabled]="first"
                        [ngStyle]="first ? {'visibility':'hidden' } : {}"
                        mat-icon-button
                        (click)="onMove($event, 'up',consumption, index)">
                        <mat-icon>arrow_upward</mat-icon>
                    </button>

                    <button [disabled]="last"
                        [ngStyle]="last ? {'visibility':'hidden' } : {}"
                        mat-icon-button
                        (click)="onMove($event, 'down', consumption, index)">
                        <mat-icon>arrow_downward</mat-icon>
                    </button>
                    <div class="property">{{consumption.nameDutch}}</div>
                </mat-panel-title>
                <mat-panel-description>
                    <div class="property price">{{consumption.price|currency:'EUR'}}</div>
                    <div class="buttons">
                        <button mat-icon-button
                            (click)="onDelete($event,consumption)">
                            <mat-icon color="warn">delete</mat-icon>
                        </button>
                        <button mat-icon-button
                            (click)="onEdit($event, index,consumption)">
                            <mat-icon color="primary">edit</mat-icon>
                        </button>


                    </div>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="consumption-properties">
                @if(consumption.nameDutch){
                <div class="name-dutch consumption-property">
                    <div class="property-name">name dutch</div>
                    <div class="property">{{consumption.nameDutch}}</div>
                </div>
                }
                @if(consumption.nameEnglish) {
                <div class="name-english consumption-property">
                    <div class="property-name">name english</div>
                    <div class="property">{{consumption.nameEnglish}}</div>
                </div>
                }
                @if(consumption.price) {
                <div class="price consumption-property">
                    <div class="property-name">price</div>
                    <div class="property">{{consumption.price|currency:'EUR'}}</div>
                </div>
                }
                @if(consumption.descriptionDutch) {
                <div class="price consumption-property">
                    <div class="property-name">desc. dutch</div>
                    <div class="property"
                        [innerHTML]="consumption.descriptionDutch">
                    </div>
                </div>
                }
                @if(consumption.descriptionEnglish) {
                <div class="price consumption-property">
                    <div class="property-name">desc. english</div>
                    <div class="property"
                        [innerHTML]="consumption.descriptionEnglish">
                    </div>
                </div>
                }
                @if(consumption.alcoholPercentage) {
                <div class="price consumption-property">
                    <div class="property-name">alc. %</div>
                    <div class="property">{{consumption.alcoholPercentage|number}}
                    </div>
                </div>
                }
                @if(consumption.vessel) {
                <div class="price consumption-property">
                    <div class="property-name">vessel</div>
                    <div class="property">{{consumption.vessel}}
                    </div>
                </div>
                }
                @if(consumption.volume) {
                <div class="price consumption-property">
                    <div class="property-name">vol. cc</div>
                    <div class="property">{{consumption.volume|number}}
                    </div>
                </div>
                }

                <div class="price consumption-property">
                    <div class="property-name">available outside</div>
                    <div class="property">{{consumption.availableOutside}}
                    </div>
                </div>

            </div>

        </mat-expansion-panel>
        }
    </mat-accordion>


    } @else {
    <p class="consumptions-list">no consumptions</p>
    }

    <button mat-raised-button
        [disabled]="store.consumption()"
        color="primary"
        (click)="store.toggleConsumptionDetailsVisible(true)">
        <mat-icon>add</mat-icon>
    </button>
    <button class="clear-selection-btn"
        [disabled]="store.consumption()"
        mat-raised-button
        (click)="onCancel()">cancel</button>
</div>
